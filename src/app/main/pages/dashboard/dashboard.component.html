<div class="surface">
  <div class="surface-header">
    <app-text-input
      width="360px"
      [control]="searchControl"
      label="Pesquisar"
      placeholder="Pesquisar..."
    ></app-text-input>
    <app-button (buttonClick)="openPaymentFormModal()">Adicionar</app-button>
  </div>

  <div class="table-container">
    <app-loading-indicator
      *ngIf="getPaymentsService.isLoading"
      style="flex: 1"
      class="flex-center"
    ></app-loading-indicator>

    <table
      *ngIf="!getPaymentsService.isLoading"
      mat-table
      [dataSource]="dataSource"
      matSort
    >
      <!-- First Name Column -->
      <ng-container matColumnDef="username">
        <th
          mat-header-cell
          *matHeaderCellDef
          mat-sort-header
          sortActionDescription="Sort by number"
        >
          Usuário
        </th>
        <td mat-cell *matCellDef="let element">{{ element.username }}</td>
      </ng-container>

      <!-- Title Column -->
      <ng-container matColumnDef="title">
        <th
          mat-header-cell
          *matHeaderCellDef
          mat-sort-header
          sortActionDescription="Sort by number"
        >
          Título
        </th>
        <td mat-cell *matCellDef="let element">{{ element.title }}</td>
      </ng-container>

      <!-- Date Column -->
      <ng-container matColumnDef="date">
        <th
          mat-header-cell
          *matHeaderCellDef
          mat-sort-header
          sortActionDescription="Sort by number"
        >
          Data
        </th>
        <td mat-cell *matCellDef="let element">
          {{ element.date | date : "dd/MM/yyyy" }}
        </td>
      </ng-container>

      <!-- Value Column -->
      <ng-container matColumnDef="value">
        <th
          mat-header-cell
          *matHeaderCellDef
          mat-sort-header
          sortActionDescription="Sort by number"
        >
          Valor
        </th>
        <td mat-cell *matCellDef="let element">
          {{ element.value | currency : "R$ " }}
        </td>
      </ng-container>

      <!-- isPayed Column -->
      <ng-container matColumnDef="isPayed">
        <th mat-header-cell *matHeaderCellDef>Pago</th>
        <td mat-cell *matCellDef="let element">
          <mat-checkbox
            [disabled]="true"
            [checked]="element.isPayed"
          ></mat-checkbox>
        </td>
      </ng-container>

      <!-- Actions Column -->
      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef>Ações</th>
        <td mat-cell *matCellDef="let element">
          <app-icon-button
            (buttonClick)="openPaymentFormModal(element)"
            matSuffix
            tooltip="Editar"
            buttonAreaLabel="Editar"
            iconName="edit"
          ></app-icon-button>
          <app-icon-button
            (buttonClick)="openDeleteModal(element)"
            matSuffix
            tooltip="Deletar"
            buttonAreaLabel="Deletar"
            iconName="delete"
          ></app-icon-button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>

    <mat-paginator
      [pageSizeOptions]="[10, 20, 40]"
      showFirstLastButtons
      aria-label="Selecione a página"
      class="mat-paginator-sticky"
    >
    </mat-paginator>
  </div>
</div>
